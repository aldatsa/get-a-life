<!doctype>

<html>
    <head>
        <meta charset="utf-8">
        <title>Get a life</title>
    </head>
    <body>
        <div id="generation-counter">Generation: 0</div>
        <div id="alive-cell-counter">Number of alive cells: 0</div>

        <canvas id="canvas" width="800" height="800"></canvas>
        <script type="text/javascript" src="js/CellularAutomaton.js"></script>
        <script type="text/javascript">
            window.onload = function() {

                var canvas = document.getElementById("canvas");
                var generation_counter = document.getElementById("generation-counter");
                var alive_cell_counter = document.getElementById("alive-cell-counter");

                var ctx = canvas.getContext("2d");

                // http://www.conwaylife.com/wiki/Rulestring#Rules

                //            0      1      2     3      4      5      6      7      8
                var born = [false, false, false, true, false, false, false, false, false];

                //               0      1      2    3      4      5      6      7      8
                var survive = [false, false, true, true, false, false, false, false, false];

                var width = 500;
                var height = 500;
                var probability = 0.1;
                var cell_size = 10;

                var cellular_automaton = CellularAutomaton({
                    rules: {
                        born: born,
                        survive: survive
                    },
                    colors: ["#ffffff", "#000000"],
                    width: width,
                    height: height,
                    cell_size: cell_size,
                    probability: probability
                });

                //cellular_automaton.drawRandomValues(ctx);
                cellular_automaton.initialize(ctx, "f-pentomino");

                cellular_automaton.draw(ctx);

                alive_cell_counter.innerHTML = "Number of alive cells: " + cellular_automaton.getAliveCellCount();

                setInterval(function() {
                    cellular_automaton.calculateNextGeneration(ctx);
                    cellular_automaton.draw(ctx);

                    generation_counter.innerHTML = "Generation: " + cellular_automaton.getGenerationCount();

                    alive_cell_counter.innerHTML = "Number of alive cells: " + cellular_automaton.getAliveCellCount();


                }, 1000);

            };
        </script>
    </body>
</html>
